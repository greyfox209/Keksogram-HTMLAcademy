{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://kekstagram/./source/js/load-image.js","webpack://kekstagram/webpack/bootstrap","webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-photo.js","webpack://kekstagram/./source/js/addpreview.js","webpack://kekstagram/./source/js/fetch.js","webpack://kekstagram/./source/js/alerts.js","webpack://kekstagram/./source/js/effects.js","webpack://kekstagram/./source/js/editor.js","webpack://kekstagram/./source/js/validation.js","webpack://kekstagram/./source/js/main.js"],"sourcesContent":["const FILE_TYPES = ['jpg', 'jpeg', 'png'];\n\nconst Picture = {\n  WIDTH: 600,\n  HEIGHT: 600,\n};\n\nconst uploadFile = document.querySelector('#upload-file');\nconst uploadPreviewContainer = document.querySelector('.img-upload__preview');\nconst uploadPreview = uploadPreviewContainer.querySelector('img');\nconst previews = document.querySelectorAll('.effects__preview');\n\nuploadFile.addEventListener('change', () => {\n  const file = uploadFile.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      uploadPreview.src = reader.result;\n      uploadPreview.width = Picture.WIDTH;\n      uploadPreview.height = Picture.HEIGHT;\n\n      previews.forEach((filter) => {\n        filter.style.backgroundImage = `url(${reader.result})`;\n      });\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// ESCAPE\nconst Keys = {\n  ESC: 'Esc',\n  ESCAPE: 'Escape',\n};\n\nconst checkEsc = (evt) => {\n  return evt.key === Keys.ESC || evt.key === Keys.ESCAPE;\n};\n\n// перемешиваем массив\nconst shuffleArray = (arr) => {\n  let j, temp;\n  for (let i = arr.length - 1; i > 0; i--) {\n    j = Math.floor(Math.random() * (i + 1));\n    temp = arr[j];\n    arr[j] = arr[i];\n    arr[i] = temp;\n  }\n  return arr;\n};\n\n// таймаут запроса\nconst DEBOUNCE_INTERVAL = 500;\n\nconst debounce = (cb) => {\n  let lastTimeout = null;\n\n  return (...args) => {\n    if (lastTimeout) {\n      window.clearTimeout(lastTimeout);\n    }\n    lastTimeout = window.setTimeout(() => {\n      cb(...args);\n    }, DEBOUNCE_INTERVAL);\n  };\n};\n\nexport { checkEsc, shuffleArray, debounce };\n","import { checkEsc } from './util.js';\n\nconst COMMENTS_LOAD_STEP = 5;\n\nconst bigPicture = document.querySelector('.big-picture');\nconst scrollOff = document.querySelector('body');\nconst bigPictureClose = document.querySelector('.big-picture__cancel');\nconst commentTemplate = document.querySelector('#comment').content.querySelector('.social__comment');\nconst commentList = document.querySelector('.social__comments');\n\nlet commentsLoaded = [];\n\nconst commentCount = bigPicture.querySelector('.social__comment-count');\nconst commentsLoader = bigPicture.querySelector('.comments-loader');\n\nlet commentsCount = COMMENTS_LOAD_STEP;\n\n// действия для закрытия большой картинки/поста\n\nconst onBigPictureCloseClick = () => {\n  bigPicture.classList.add('hidden');\n  scrollOff.classList.remove('modal-open');\n  bigPictureClose.removeEventListener('click', onBigPictureCloseClick);\n  commentList.innerHTML = '';\n  document.removeEventListener('keydown', onBigPictureEscKeyDown)\n  commentsCount = COMMENTS_LOAD_STEP;\n  commentsLoaded = [];\n};\n\nconst onBigPictureEscKeyDown = (evt) => {\n  if (checkEsc(evt)) {\n    onBigPictureCloseClick()\n  }\n};\n\n// функция вывода комментариев\n\nconst renderComment = (comment) => {\n  const commentSimilar = commentTemplate.cloneNode(true);\n\n  commentSimilar.querySelector('.social__picture').src = comment.avatar;\n  commentSimilar.querySelector('.social__picture').alt = comment.name;\n  commentSimilar.querySelector('.social__text').textContent = comment.message;\n\n  return commentSimilar;\n};\n\nconst renderComments = (comments) => {\n\n  const onCommentsLoaderClick = () => {\n    renderComments(comments);\n  };\n\n  commentsCount = (comments.length < COMMENTS_LOAD_STEP) ? comments.length : commentsCount;\n  commentsLoaded = comments.slice(0, commentsCount);\n\n  commentList.innerHTML = '';\n\n  commentCount.textContent = `${commentsLoaded.length} из ${comments.length} комментариев`;\n\n  let commentsListFragment = document.createDocumentFragment();\n\n  commentsLoaded.forEach(comment => {\n    commentsListFragment.appendChild(renderComment(comment));\n  });\n\n  commentList.appendChild(commentsListFragment);\n\n  if (comments.length > COMMENTS_LOAD_STEP && commentsLoaded.length < comments.length) {\n    commentsLoader.classList.remove('hidden');\n    commentsLoader.addEventListener('click', onCommentsLoaderClick, { once: true })\n  } else {\n    commentsLoader.classList.add('hidden');\n  }\n\n  commentsCount += COMMENTS_LOAD_STEP;\n};\n\n// функция вывода большой картинки/поста\nconst show = (picture) => {\n  commentsCount = COMMENTS_LOAD_STEP;\n  commentsLoaded = [];\n  scrollOff.classList.add('modal-open');\n  bigPicture.querySelector('.big-picture__img > img').src = picture.url;\n  bigPicture.querySelector('.likes-count').textContent = picture.likes;\n  bigPicture.querySelector('.social__caption').textContent = picture.description;\n\n  bigPictureClose.addEventListener('click', onBigPictureCloseClick);\n  bigPicture.classList.remove('hidden');\n\n  document.addEventListener('keydown', onBigPictureEscKeyDown)\n\n  renderComments(picture.comments.slice());\n};\n\nexport { show };\n","import { show } from './big-photo.js';\n\nconst pictureTemplate = document.querySelector('#picture').content.querySelector('.picture');\nconst picturesList = document.querySelector('.pictures');\n\nconst renderPhoto = (picture) => {\n  const photoPreview = pictureTemplate.cloneNode(true);\n\n  photoPreview.querySelector('.picture__img').src = picture.url;\n  photoPreview.querySelector('.picture__likes').textContent = picture.likes;\n  photoPreview.querySelector('.picture__comments').textContent = picture.comments.length;\n\n  photoPreview.addEventListener('click', (evt) => {\n    evt.preventDefault();\n    show(picture);\n  });\n\n  return photoPreview;\n};\n\nconst renderPhotos = (photos) => {\n  let picturesListFragment = document.createDocumentFragment();\n\n  photos.forEach((photo) => {\n\n    picturesListFragment.appendChild(renderPhoto(photo));\n  });\n\n  picturesList.appendChild(picturesListFragment);\n};\n\nexport { renderPhotos };\n","const Urls = {\n  GET: 'https://22.javascript.pages.academy/kekstagram/data',\n  POST: 'https://22.javascript.pages.academy/kekstagram',\n};\n\nconst request = (onSuccess, onError, method, data) => {\n  fetch(Urls[method],\n    {\n      method: method,\n      body: data,\n    })\n    .then((response) => response.json())\n    .then((response) => {\n      onSuccess(response)\n    })\n    .catch(() => {\n      onError()\n    })\n};\n\nexport { request };\n","import { checkEsc } from './util.js';\n\nconst main = document.querySelector('main');\nconst errorTemplate = document.querySelector('#error').content;\nconst errorFragment = document.createDocumentFragment();\nconst successTemplate = document.querySelector('#success').content;\nconst successFragment = document.createDocumentFragment();\n\nconst removeEscapeAlert = (evt, className) => {\n  if (checkEsc(evt)) {\n    removeAllert(className);\n  }\n}\n\nconst onErrorEscKeydown = (evt) => {\n  removeEscapeAlert(evt, '.error')\n  document.removeEventListener('keydown', onErrorEscKeydown);\n}\n\nconst onSuccessEscKeydown = (evt) => {\n  removeEscapeAlert(evt, '.success')\n  document.removeEventListener('keydown', onSuccessEscKeydown);\n}\n\nconst removeAllert = (type) => {\n  document.querySelector(type).remove();\n};\n\nconst showError = (text, button) => {\n  const errorElement = errorTemplate.cloneNode(true);\n\n  errorElement.querySelector('.error__title').textContent = text;\n  errorElement.querySelector('.error__button').textContent = button;\n\n  const errorButton = errorElement.querySelector('.error__button');\n\n  errorElement.querySelector('.error').addEventListener('click', (evt) => {\n    let element = evt.target.classList;\n    if (!element.contains('error__inner')) {\n      document.removeEventListener('keydown', onErrorEscKeydown);\n      removeAllert('.error')\n    }\n  });\n\n  errorButton.addEventListener('click', () => {\n    removeAllert('.error');\n  })\n\n  document.addEventListener('keydown', onErrorEscKeydown);\n\n  errorFragment.appendChild(errorElement);\n  main.appendChild(errorFragment);\n}\n\nconst showSuccess = (text) => {\n  const successElement = successTemplate.cloneNode(true);\n\n  successElement.querySelector('.success__title').textContent = text;\n\n  successElement.querySelector('.success').addEventListener('click', (evt) => {\n    let element = evt.target.classList;\n    if (!element.contains('success__inner')) {\n      document.removeEventListener('keydown', onSuccessEscKeydown);\n      removeAllert('.success')\n    }\n  });\n\n  document.addEventListener('keydown', onSuccessEscKeydown);\n\n  successFragment.appendChild(successElement);\n  main.appendChild(successFragment);\n}\n\nexport { showError, showSuccess };\n","/* global noUiSlider:readonly */\n\nconst DEFAULT_EFFECT_LEVEL = 100;\n\nconst Slider = {\n  MAX: 100,\n  MIN: 0,\n  STEP: 1,\n}\n\nconst effectRadioGroup = document.querySelector('.img-upload__effects');\nconst effectLevel = document.querySelector('.img-upload__effect-level');\nconst effectLevelSlider = document.querySelector('.effect-level__slider');\nconst uploadPreviewImg = document.querySelector('.img-upload__preview > img');\nconst effectLevelValue = document.querySelector('.effect-level__value');\n\neffectLevel.classList.add('visually-hidden')\n\nlet lastClass = '';\n\nconst effects = {\n  none: () => {\n    effectLevel.classList.add('visually-hidden')\n    return 'none';\n  },\n  chrome: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `grayscale(${parseInt(effectLevelValue.value, 10) * 0.01})`;\n  },\n  sepia: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `sepia(${parseInt(effectLevelValue.value, 10) * 0.01})`;\n  },\n  marvin: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `invert(${Math.floor(effectLevelValue.value)}%)`;\n  },\n  phobos: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `blur(${(parseInt(effectLevelValue.value, 10) * 3) * 0.01}px)`;\n  },\n  heat: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `brightness(${(parseInt(effectLevelValue.value, 10) * 3) * 0.01})`;\n  },\n}\n\nconst onEffectRadioGroupClick = (evt) => {\n  if (evt.target.classList.contains('effects__preview')) {\n    if (lastClass !== '') {\n      uploadPreviewImg.classList.remove(lastClass);\n    }\n    effectLevelSlider.noUiSlider.set(DEFAULT_EFFECT_LEVEL);\n    let currentClass = evt.target.classList[1];\n    lastClass = currentClass;\n\n    uploadPreviewImg.classList.add(currentClass);\n    uploadPreviewImg.style.filter = effects[currentClass.replace('effects__preview--', '')]();\n  }\n};\n\neffectRadioGroup.addEventListener('click', onEffectRadioGroupClick)\n\nnoUiSlider.create(effectLevelSlider, {\n  range: {\n    min: Slider.MIN,\n    max: Slider.MAX,\n  },\n  start: Slider.MAX,\n  connect: 'lower',\n});\n\neffectLevelSlider.noUiSlider.on('change', () => {\n  effectLevelValue.value = Math.round(effectLevelSlider.noUiSlider.get());\n\n  uploadPreviewImg.style.filter = effects[lastClass.replace('effects__preview--', '')]();\n});\n\nconst setDefaultLevel = () => {\n  effectLevelSlider.noUiSlider.set(DEFAULT_EFFECT_LEVEL);\n  effectLevelValue.value = DEFAULT_EFFECT_LEVEL;\n  effectLevel.classList.add('visually-hidden');\n  uploadPreviewImg.style.filter = null;\n  if (lastClass) {\n    uploadPreviewImg.classList.remove(lastClass);\n  }\n}\n\nexport { setDefaultLevel }\n","import { request } from './fetch.js';\nimport { showError, showSuccess } from './alerts.js';\nimport { checkEsc } from './util.js';\nimport { setDefaultLevel } from './effects.js';\n\n\nconst Scale = {\n  MAX: 100,\n  MIN: 25,\n  STEP: 25,\n}\n\nconst scrollOff = document.querySelector('body');\nconst uploadModal = document.querySelector('.img-upload__overlay');\nconst uploadInput = document.querySelector('#upload-file');\nconst uploadModalClose = document.querySelector('#upload-cancel')\n\n// открываем окно фильтров после загрузки файла\nuploadInput.addEventListener('change', function () {\n  resetSettings();\n  uploadModal.classList.remove('hidden');\n  scrollOff.classList.add('modal-open');\n  document.addEventListener('keydown', onEditorFormEscapeKeydown);\n\n})\n\n// закрытие окна\nconst closeModal = () => {\n  uploadModal.classList.add('hidden');\n  scrollOff.classList.remove('modal-open');\n  inputHashtag.style.border = 'none';\n  uploadInput.value = '';\n  uploadForm.reset();\n  setDefaultLevel();\n  document.removeEventListener('keydown', onEditorFormEscapeKeydown);\n}\n\nuploadModalClose.addEventListener('click', function () {\n  closeModal();\n})\n\nconst onEditorFormEscapeKeydown = (evt) => {\n  if (checkEsc(evt)) {\n    closeModal();\n  }\n}\n\n\n\n// зум картинки\nconst buttonPlus = uploadModal.querySelector('.scale__control--bigger');\nconst buttonMinus = uploadModal.querySelector('.scale__control--smaller');\nconst scaleValue = uploadModal.querySelector('.scale__control--value');\nconst imagePreview = uploadModal.querySelector('.img-upload__preview > img');\nlet inputHashtag = uploadModal.querySelector('.text__hashtags');\n\nconst resetSettings = () => {\n  imagePreview.style = 'transform: scale(1.00)'\n  scaleValue.value = '100%';\n}\n\nbuttonPlus.addEventListener('click', () => {\n  let scale = parseInt(scaleValue.value, 10) + Scale.STEP;\n\n  if (scale >= Scale.MAX) {\n    scale = Scale.MAX;\n  }\n\n  scaleValue.value = scale + '%';\n  scale = scale / 100;\n  imagePreview.style.transform = 'scale(' + scale + ')';\n})\n\nbuttonMinus.addEventListener('click', () => {\n  let scale = parseInt(scaleValue.value, 10) - Scale.STEP;\n\n  if (scale <= Scale.MIN) {\n    scale = Scale.MIN;\n  }\n\n  scaleValue.value = scale + '%';\n  scale = scale / 100;\n  imagePreview.style.transform = 'scale(' + scale + ')';\n})\n\n// Отправляем фотку\nconst uploadForm = document.querySelector('.img-upload__form');\n\nconst onSuccess = () => {\n  showSuccess('Ура!')\n  closeModal();\n}\n\nconst onError = () => {\n  showError('ЧТо-то пошло не так', 'Загрузить другой файл');\n}\n\nuploadForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n\n\n  request(onSuccess, onError, 'POST', new FormData(evt.target))\n});\n\nexport { closeModal };\n","import { checkEsc } from './util.js';\n\nlet MAX_SYMBOLS = 20;\nlet MAX_HASHTAGS = 5;\nlet MAX_COMMENTLENGTH = 140;\n\nlet inputHashtag = document.querySelector('.text__hashtags');\nlet inputComment = document.querySelector('.text__description');\n\ninputComment.addEventListener('input', () => {\n  inputComment.setCustomValidity('');\n  let inputCommentText = inputComment.value;\n\n  if (inputCommentText.length > MAX_COMMENTLENGTH) {\n    inputComment.setCustomValidity('Максимум 140 символов');\n  }\n})\n\ninputHashtag.addEventListener('input', () => {\n  inputHashtag.setCustomValidity('');\n  inputHashtag.style.border = 'none';\n\n  let inputText = inputHashtag.value.toLowerCase().trim();\n\n  if (!inputText) {\n    return;\n  }\n\n  let inputArray = inputText.split(/\\s+/);\n\n  if (inputArray.length === 0) {\n    return;\n  }\n\n  const isStartNotHashtag = inputArray.some((item) => {\n    return item[0] !== '#';\n  });\n  if (isStartNotHashtag) {\n    inputHashtag.setCustomValidity('Хэш-тег начинается с символа # (решётка)');\n\n  }\n\n  const isOnlyLatticeHashtag = inputArray.some((item) => {\n    return item === '#';\n  });\n  if (isOnlyLatticeHashtag) {\n    inputHashtag.setCustomValidity('Хэш-тег не может состоять только из решетки')\n  }\n\n  const isSplitSpaceHashtag = inputArray.some((item) => {\n    return item.indexOf('#', 1) >= 1;\n  });\n  if (isSplitSpaceHashtag) {\n    inputHashtag.setCustomValidity('Хэш-теги разделяются пробелами');\n  }\n\n  const isRepeatingHashtag = inputArray.some((item, i, arr) => {\n    return arr.indexOf(item, i + 1) >= i + 1;\n  });\n  if (isRepeatingHashtag) {\n    inputHashtag.setCustomValidity('Хэш-теги не должны повторяться');\n  }\n\n  const isLongHashtag = inputArray.some((item) => {\n    return item.length > MAX_SYMBOLS;\n  });\n  if (isLongHashtag) {\n    inputHashtag.setCustomValidity('Максимальная длина хэш-тега 20 символов, включая решетку');\n  }\n  if (inputArray.length > MAX_HASHTAGS) {\n    inputHashtag.setCustomValidity('Максимум 5 хэш-тегов');\n  }\n\n  if (!inputHashtag.checkValidity()) {\n    inputHashtag.style.border = '2px solid red';\n  } else {\n    inputHashtag.style.border = 'none';\n  }\n})\n\nconst onEscapeDown = (evt) => {\n  if (checkEsc(evt)) {\n    evt.preventDefault();\n    evt.stopPropagation();\n  }\n}\n\ninputHashtag.addEventListener('keydown', onEscapeDown)\ninputComment.addEventListener('keydown', onEscapeDown)\n","import { renderPhotos } from './addpreview.js';\nimport { request } from './fetch.js';\nimport { showError } from './alerts.js';\nimport { shuffleArray, debounce } from './util.js';\nimport './editor.js';\nimport './effects.js';\nimport './validation.js';\nimport './load-image.js';\n\nconst DEFAULT_PREVIEW_LOAD = 25;\nconst RANDOM_PREVIEW_LOAD = 10;\n\nconst filter = document.querySelector('.img-filters');\nlet photos = [];\n\nfunction removeActiveClass() {\n  let activeFilter = document.querySelector('.img-filters__button--active');\n  activeFilter.classList.remove('img-filters__button--active');\n};\n\nconst removePhotos = () => {\n  const images = document.querySelectorAll('.picture');\n  if (images) {\n    images.forEach(element => {\n      element.remove();\n    });\n  }\n};\n\nconst filters = {\n  'filter-default': () => {\n    renderPhotos(photos.slice(0, DEFAULT_PREVIEW_LOAD))\n  },\n  'filter-random': () => {\n    renderPhotos(shuffleArray(photos.slice()).slice(0, RANDOM_PREVIEW_LOAD));\n\n  },\n  'filter-discussed': () => {\n    renderPhotos(photos.slice().sort((a, b) => {\n      return b.comments.length - a.comments.length;\n    }))\n  },\n};\n\nconst onSuccess = (data) => {\n  filter.classList.remove('img-filters--inactive');\n  photos = data.slice()\n  renderPhotos(photos.slice(0, DEFAULT_PREVIEW_LOAD))\n};\n\nconst onError = () => {\n  showError('Ошибка загрузки, попробуйте еще раз', 'Закрыть')\n};\n\nrequest(onSuccess, onError, 'GET')\n\nconst onFilterClick = debounce((evt) => {\n  if (evt.target.classList.contains('img-filters__button')) {\n    removeActiveClass();\n    removePhotos();\n    evt.target.classList.add('img-filters__button--active')\n    filters[evt.target.id]()\n  }\n});\n\nfilter.addEventListener('click', onFilterClick);\n"],"names":["FILE_TYPES","uploadFile","document","querySelector","uploadPreview","previews","querySelectorAll","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","width","height","forEach","filter","style","backgroundImage","readAsDataURL","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","checkEsc","evt","key","bigPicture","scrollOff","bigPictureClose","commentTemplate","content","commentList","commentsLoaded","commentCount","commentsLoader","commentsCount","onBigPictureCloseClick","classList","add","remove","removeEventListener","innerHTML","onBigPictureEscKeyDown","renderComments","comments","length","slice","textContent","commentsListFragment","createDocumentFragment","comment","appendChild","commentSimilar","cloneNode","avatar","alt","message","renderComment","once","pictureTemplate","picturesList","renderPhotos","photos","picturesListFragment","photo","picture","photoPreview","url","likes","preventDefault","description","show","renderPhoto","Urls","GET","POST","request","onSuccess","onError","method","data","fetch","body","then","response","json","catch","main","errorTemplate","errorFragment","successTemplate","successFragment","removeEscapeAlert","className","removeAllert","onErrorEscKeydown","onSuccessEscKeydown","type","showError","text","button","errorElement","errorButton","target","contains","effectRadioGroup","effectLevel","effectLevelSlider","uploadPreviewImg","effectLevelValue","lastClass","effects","none","chrome","parseInt","value","sepia","marvin","Math","floor","phobos","heat","noUiSlider","set","currentClass","replace","create","range","min","max","start","connect","on","round","get","uploadModal","uploadInput","uploadModalClose","resetSettings","onEditorFormEscapeKeydown","closeModal","inputHashtag","border","uploadForm","reset","buttonPlus","buttonMinus","scaleValue","imagePreview","scale","transform","successElement","showSuccess","FormData","inputComment","setCustomValidity","inputText","trim","inputArray","split","item","indexOf","i","arr","checkValidity","onEscapeDown","stopPropagation","filters","j","temp","random","shuffleArray","sort","a","b","onFilterClick","cb","lastTimeout","args","window","clearTimeout","setTimeout","images","element","removePhotos","id","debounce"],"sourceRoot":""}